%
o<cmm_disconnect> call
o<reload_calib> call
o<cmm_set_skip_updates> call [1]
o<cmm_connect> call
o<cmm_setup> call
o<v2_calib_setup_verify> call

g21
g0 z0
g0 a90y0

#<yPos> = 0
#<aAngle> = 90
#<aAngleMeas> = 90
#<aErrAbs> = 0
o100 do
  g0 a85
  g0 a[#<aAngle>]
  M66 E0 L0
  o<v2_calib_find_pos_a> call [#<yPos>] [#<aAngle>]
  #<aAngleMeas> = [#<_value>]
  #<aErrAbs> = [ ABS[ #<aAngleMeas> - 90] ] 
  #<aAngle> = [#<aAngle> - #<aAngleMeas>]
  o<cmm_go_to_clearance_y> call
o100 while [#<aErrAbs> GT 0.003]

o<cmm_go_to_clearance_y> call
o<cmm_go_to_clearance_z> call


g0 b45
o<v2-calib-align-fixture-perp-y> call [45]
%
